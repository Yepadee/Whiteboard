<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="${header}:: head"></head>
<body>
	<div th:replace="${sidebar}:: sidebar"></div>

	<div class="right-side">
		<nav class="navbar navbar-inverse navbar-fixed-top">
			<div class="container-fluid">
				<ul class="nav navbar-nav navbar-left">
					<h3>Log</h3>
				</ul>
			</div>
		</nav>
	</div>
	<div class="content">
		<div class="container outstanding-tasks">
			<div class="row">
			
				<div class="col-sm-9 col-lg-12 table-wrapper">
				<h4>Project Log (My Projects)</h4>
				<div th:each="project: ${user.myProjects}">
				<br><br>
					<p class="font-bold" style="text-decoration: underline;"><span th:text="${project.name}"></span></p>
					<p class="font-bold">UnitDirector Actions</p>
					<table class="table panel panel-default" id="table" >
						<thead>
							<tr>
								<th>Date</th>
								<th>Unit Director</th>
								<th>Action</th>
								<th></th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="action: ${project.actions}">
								<td><span th:text="${action.date}"></span></td>
								<td><span th:text="${action.user}"></span></td>
								<td><span th:text="${action.description}"></span></td>
							</tr>
						</tbody>
					</table>
					<br><br>
				<div th:each="assessment: ${project.assessments}">
					<p class="font-bold" style="text-decoration: underline;"><span th:text="${assessment.name}"></span></p>
					<p class="font-bold">Student Actions</p>
					<table class="table panel panel-default" id="table" >
						<thead>
							<tr>
								<th>Date</th>
								<th>Actor</th>
								<th>Action</th>
								<th></th>
							</tr>
						</thead>
						<tbody th:each="task: ${assessment.tasks}">
							<tr th:each="action: ${task.actions}">
								<td><span th:text="${action.date}"></span></td>
								<td><span th:text="${action.user}"></span></td>
								<td><span th:text="${action.description}"></span></td>
							</tr>
						</tbody>
					</table>
					<br><br>
					<p class="font-bold">Assessor Feedback Actions</p>
					
					<table class="table panel panel-default" id="table">
						<thead>
							<tr>
								<th>Date</th>
								<th>Assessor</th>
								<th>Student/Group</th>
								<th>Action</th>
								<th></th>
							</tr>
						</thead>
						<div th:each="task: ${assessment.tasks}">
						<tbody th:each="feedbackMap : ${task.feedback}">
							<tr th:each="action: ${feedbackMap.value.actions}">
								<td><span th:text="${action.date}"></span></td>
								<td><span th:text="${action.user}"></span></td>
								<td><span th:text="${feedbackMap.value.task.accountable.name}"></span></td>
								<td><span th:text="${action.description}"></span></td>
							</tr>
						</tbody>
						</div>
					</table>
				</div>
				
				</div>
				</div>	
				</div>
				
				<div class="col-sm-9 col-lg-12 table-wrapper">
				<h5>Project Log (Assigned Projects)</h5>
				<div th:each="project: ${user.assignedProjects}">
				<br><br>
					<p class="font-bold" style="text-decoration: underline;"><span th:text="${project.name}"></span></p>
					<p class="font-bold">UnitDirector Actions</h3>
					<table class="table panel panel-default" id="table" >
						<thead>
							<tr>
								<th>Date</th>
								<th>Unit Director</th>
								<th>Action</th>
								<th></th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="action: ${project.actions}">
								<td><span th:text="${action.date}"></span></td>
								<td><span th:text="${action.user}"></span></td>
								<td><span th:text="${action.description}"></span></td>
							</tr>
						</tbody>
					</table>
					<br><br>
				<div th:each="assessment: ${project.assessments}">
					<p class="font-bold" style="text-decoration: underline;"><span th:text="${assessment.name}"></span></p>
					<p class="font-bold">Student Actions</p>
					<table class="table panel panel-default" id="table" >
						<thead>
							<tr>
								<th>Date</th>
								<th>Actor</th>
								<th>Action</th>
								<th></th>
							</tr>
						</thead>
						<tbody th:each="task: ${assessment.tasks}">
							<tr th:each="action: ${task.actions}">
								<td><span th:text="${action.date}"></span></td>
								<td><span th:text="${action.user}"></span></td>
								<td><span th:text="${action.description}"></span></td>
							</tr>
						</tbody>
					</table>
					<br><br>
					<p class="font-bold">Assessor Feedback Actions</p>
					
					<table class="table panel panel-default" id="table">
						<thead>
							<tr>
								<th>Date</th>
								<th>Assessor</th>
								<th>Student/Group</th>
								<th>Action</th>
								<th></th>
							</tr>
						</thead>
						<div th:each="task: ${assessment.tasks}">
						<tbody th:each="feedbackMap : ${task.feedback}">
							<tr th:each="action: ${feedbackMap.value.actions}">
								<td><span th:text="${action.date}"></span></td>
								<td><span th:text="${action.user}"></span></td>
								<td><span th:text="${feedbackMap.value.task.accountable.name}"></span></td>
								<td><span th:text="${action.description}"></span></td>
							</tr>
						</tbody>
						</div>
					</table>
				</div>
				
				</div>
				</div>	
						
				<div class="col-sm-9 col-lg-12 table-wrapper">
				<h5>Feedback Log</h5>
				<div th:each="feedback: ${user.taskFeedback}">
					<br><br>
					<p class="font-bold" style="text-decoration: underline;"><span th:text="${feedback.task.assessment.project.name}"></span>: <span th:text="${feedback.task.assessment.name}"></span></p>
					<p class="font-bold">My Actions</p>
					<table class="table panel panel-default" id="table" >
						<thead>
							<tr>
								<th>Date</th>
								<th>Action</th>
								<th></th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="action: ${feedback.actions}">
								<td><span th:text="${action.date}"></span></td>
								<td><span th:text="${action.description}"></span></td>
							</tr>
						</tbody>
					</table>
					
					<p class="font-bold"><span th:text="${feedback.task.accountable.name}"></span>'s Actions</p>
					<table class="table panel panel-default" id="table" >
						<thead>
							<tr>
								<th>Date</th>
								<th>Action</th>
								<th></th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="action: ${feedback.task.actions}">
								<td><span th:text="${action.date}"></span></td>
								<td><span th:text="${action.description}"></span></td>
							</tr>
						</tbody>
					</table>
					
					</div>
				</div>
				
				<div class="col-sm-9 col-lg-12 table-wrapper">
				<h5>My Actions (Tasks)</h5>
				<div th:each="task: ${user.allTasks}">
				<h3><span th:text="${task.assessment.project.name}"></span>: <span th:text="${task.assessment.name}"></span></h3>
					<table class="table panel panel-default" id="table" >
						<thead>
							<tr>
								<th>Date</th>
								<th>Action</th>
								<th></th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="action: ${task.actions}">
								<td><span th:text="${action.date}"></span></td>
								<td><span th:text="${action.description}"></span></td>
							</tr>
						</tbody>
					</table>
					</div>
				</div>
				
			</div>
		</div>
	</div>
</body>
</html>
